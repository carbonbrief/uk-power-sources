<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mapped: UK power sources | Carbon Brief</title>
  <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.11/themes/css/cartodb.css" />
  <script src="http://libs.cartocdn.com/cartodb.js/v3/3.11/cartodb.js"></script>
  <style type="text/css">
 html,
    body {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
    }
    #map {
        width: 100%;
        height: 100%;
        background: black;
    }
    #menu {
        position: absolute;
        top: 5px;
        right: 10px;
        width: 780px;
        height: 100px;
        background: transparent;
        z-index: 10;
    }
    #menu a { 
      margin: 15px 10px 0 0;
      float: right;
      vertical-align: baseline;
      width: 70px;
      padding: 10px;
	  padding-left: 20px;
      text-align: center;
      font: bold 11px "Helvetica",Arial;
      line-height: normal;
      color: #555;
      border-radius: 4px;
      border: 1px solid #7A7B7C;
	  
      background: rgba(240, 240, 240, 0.85);
      text-decoration: none;
      cursor: pointer;
	  box-shadow: 2px 2px 10px rgba(132, 148, 160, 0.5);
    }
	
#menu #interconnectors { width:120px }

	
#menu #hydro {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399175/dd595aa2-6ea8-11e5-9daf-1208d1d26751.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #hydro:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #hydro:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #wind {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399173/d45e9098-6ea8-11e5-8996-2092fe8bb984.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #wind:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #wind:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #solar {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399174/d99773ea-6ea8-11e5-8fff-8c9c03648d5d.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #solar:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #solar:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #nuclear {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399164/cbe27416-6ea8-11e5-8c74-b06174de6705.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #nuclear:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #nuclear:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #biomass {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399122/a96cf528-6ea8-11e5-8e02-b4fb309e1bd4.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #biomass:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #biomass:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #oil {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399125/abe2166c-6ea8-11e5-8c38-1da9f27994ac.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #oil:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #oil:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #gas {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399150/bc58f11e-6ea8-11e5-9532-085be4e5844c.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #gas:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #gas:hover:before {
  opacity: 0;
  color: #000000;
}
	
#menu #coal {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399152/c21d71f6-6ea8-11e5-9af1-0881b88e33c2.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #coal:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #coal:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #waste {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399160/c7a0ab02-6ea8-11e5-9e1b-fe6b2e248248.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #waste:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #waste:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #interconnectors {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399117/a4866cd8-6ea8-11e5-82a8-470f60303a42.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 15px;
  position: relative;
  z-index: 1;
}

#menu #interconnectors:before {
  background-image: inherit;
  background-position: 58% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #interconnectors:hover:before {
  opacity: 0;
  color: #000000;
}

#menu #all {
  background: url('https://cloud.githubusercontent.com/assets/11757759/10399109/9f7a55ba-6ea8-11e5-8243-53d48ce8dce6.jpg') 0 0 no-repeat;
  background-size: cover;
  color: #555;
  display: inline-block;
   padding-left: 10px;
  position: relative;
  z-index: 1;
}

#menu #all:before {
  background-image: inherit;
  background-position: 58% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
#menu #all:hover:before {
  opacity: 0;
  color: #000000;
}


	
    .cartodb-layer-selector-box,
    .cartodb-searchbox,
    .cartodb-share {
        display: none !important;
    }
	
  </style>

  <script>
var layer;


    function init() {
        var url = 'https://rospearce.cartodb.com/api/v2/viz/d80f4b84-5561-11e5-af07-0e9d821ea90d/viz.json';
        var visualizacion = cartodb.createVis("map", url)
            .done(function(vis, layers) {
                layer = layers[1];
            });
    }

    function showLayer(layerToShow) {

        //turn off all layers
        layer.getSubLayers().forEach(function(i) {
            i.hide()
        });

             switch (layerToShow.id) {
            case "interconnectors":
                layer.getSubLayer(0).show();
				layer.getSubLayer(1).show();
                break;
			case "all":
                layer.getSubLayer(0).show();
				layer.getSubLayer(1).show();
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update").show();
                break;
			case "coal":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Coal' OR technology_type = 'Coal / biomass' OR technology_type = 'Coal / oil' ").show();
                break;
			case "wind":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Wind Onshore' OR technology_type = 'Wind Offshore' ").show();
                break;
			case "solar":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Solar Photovoltaics'").show();
                break;
			case "nuclear":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Nuclear'").show();
                break;
			case "biomass":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Biomass (dedicated)' OR technology_type = 'Biomass (co-firing)' OR technology_type = 'Coal / biomass' ").show();
                break;
			case "hydro":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Large Hydro' OR technology_type = 'Small Hydro' OR technology_type = 'Pumped storage' OR technology_type = 'Shoreline Wave' OR technology_type = 'Tidal Barrage and Tidal Stream'").show();
                break;
			case "waste":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'EfW Incineration' OR technology_type = 'Waste' OR technology_type = 'Landfill Gas' OR technology_type = 'Meat & bone meal' OR technology_type = 'Sewage Sludge Digestion'").show();
                break;
			case "gas":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Gas' OR technology_type = 'CCGT' OR technology_type = 'OCGT'").show();
                break;
			case "oil":
				layer.getSubLayer(2).setSQL("SELECT * FROM power_sources_in_the_uk_aug_2015_update WHERE technology_type = 'Oil' OR technology_type = 'Diesel' OR technology_type = 'Gas oil' OR technology_type = 'Gas oil/kerosene' OR technology_type = 'Coal/oil' OR technology_type = 'Light oil' ").show();
                break;
        }

        return true;
    }
  
  </script>
</head>

<body onload="init()">
  <div id='map'></div>
  <div id='menu'>
        <a href="#interconnectors" id="interconnectors" class="button interconnectors" onclick="showLayer(this);">INTERCONNECTORS</a>
        <a href="#hydro" id="hydro" class="hydro" onclick="showLayer(this);">HYDRO</a>
        <a href="#gas" id="gas" class="gas" onclick="showLayer(this);">GAS</a>
        <a href="#coal" id="coal" class="coal" onclick="showLayer(this);">COAL</a>
        <a href="#biomass" id="biomass" class="biomass" onclick="showLayer(this);">BIOMASS</a>
        <a href="#all" id="all" class="all" onclick="showLayer(this);">ALL</a>
        <a href="#wind" id="wind" class="wind" onclick="showLayer(this);">WIND</a>
        <a href="#waste" id="waste" class="waste" onclick="showLayer(this);">WASTE</a>
        <a href="#solar" id="solar" class="solar" onclick="showLayer(this);">SOLAR</a>
        <a href="#oil" id="oil" class="oil" onclick="showLayer(this);">OIL</a>
        <a href="#nuclear" id="nuclear" class="nuclear" onclick="showLayer(this);">NUCLEAR</a>
  </div>
  <div id='logo'></div>
  <div id='return'></div>
</body>
</html>
